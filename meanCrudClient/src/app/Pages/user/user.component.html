<div class="flex flex-col">
    <div class="p-8 flex justify-between">
        <h1 class="text-2xl">User Data form</h1>
        <button type="button" class="inline-block px-6 py-2.5 bg-blue-600 text-white font-medium text-xs leading-tight uppercase rounded-full shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out" (click)="toggleForm()">{{isFormVisible ? "Close Form" : "Add User"}}</button>

    </div>
    <div class="overflow-x-hidden ">
      <div class="py-2 inline-block min-w-full sm:px-6 lg:px-8">
        <div class="overflow-hidden">
          <table class="min-w-full">
            <thead class="bg-white border-b">
              <tr>
                <th scope="col" class="text-sm font-medium text-gray-900 px-6 py-4 text-left">
                  First
                </th>
                <th scope="col" class="text-sm font-medium text-gray-900 px-6 py-4 text-left">
                  Last
                </th>
                <th scope="col" class="text-sm font-medium text-gray-900 px-6 py-4 text-left">
                  Email
                </th>
                <th scope="col" class="text-sm font-medium text-gray-900 px-6 py-4 text-left">
                  Phone
                </th>
                <th scope="col" class="text-sm font-medium text-gray-900 px-6 py-4 text-left">
                  Is Admin
                </th>
                <th scope="col" class="text-sm font-medium text-gray-900 px-6 py-4 text-left">
                    Actions
                </th>
              </tr>
            </thead>
            <tbody>
              <ng-container *ngFor="let user of users">
                <tr class="bg-white border-b transition duration-300 ease-in-out hover:bg-gray-100">
                    <td class="text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap">
                      {{user.first_name}}
                    </td>
                    <td class="text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap">
                        {{user.last_name}}
                    </td>
                    <td class="text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap">
                        {{user.email}}
                    </td>
                    <td class="text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap">
                        {{user.phone}}
                    </td>
                    <td class="text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap">
                        {{user.isSuperAdmin}}
                    </td>
                    <td>
                       <div class="action_btn flex gap-2">
                        <button type="button" class="inline-block px-6 py-2.5 bg-blue-400 text-white font-medium text-xs leading-tight uppercase rounded-full shadow-md hover:bg-blue-500 hover:shadow-lg focus:bg-blue-500 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-600 active:shadow-lg transition duration-150 ease-in-out"(click)="setDataOnForm(user._id);toggleModal()" data-bs-toggle="modal" data-bs-target="#userEditModal">Edit</button>
                        <button type="button" class="inline-block px-6 py-2.5 bg-red-400 text-white font-medium text-xs leading-tight uppercase rounded-full shadow-md hover:bg-red-500 hover:shadow-lg focus:bg-red-500 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-red-600 active:shadow-lg transition duration-150 ease-in-out" (click)="deleteUser(user._id)">Delete</button>

                       </div>
                    </td>
                  </tr>

              </ng-container>
              <ng-container *ngIf="isFormVisible">
                <tr [formGroup] = "userFormData">
                    <td class="text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap">
                        <input
                        type="text"
                        class="
                          form-control
                          block
                          w-full
                          px-3
                          py-1.5
                          text-base
                          font-normal
                          text-gray-700
                          bg-white bg-clip-padding
                          border border-solid border-gray-300
                          rounded
                          transition
                          ease-in-out
                          m-0
                          focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none
                        "
                        id="firstName"
                        required
                        formControlName = "first_name"
                        placeholder="First Name"
                      />
                    </td>
                    <td class="text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap">
                        <input
                        type="text"
                        class="
                          form-control
                          block
                          w-full
                          px-3
                          py-1.5
                          text-base
                          font-normal
                          text-gray-700
                          bg-white bg-clip-padding
                          border border-solid border-gray-300
                          rounded
                          transition
                          ease-in-out
                          m-0
                          focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none
                        "
                        id="lastName"
                        required
                        formControlName = "last_name"
                        placeholder="Last Name"
                      />
                    </td>
                    <td class="text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap">
                        <input
                        type="email"
                        class="
                          form-control
                          block
                          w-full
                          px-3
                          py-1.5
                          text-base
                          font-normal
                          text-gray-700
                          bg-white bg-clip-padding
                          border border-solid border-gray-300
                          rounded
                          transition
                          ease-in-out
                          m-0
                          focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none
                        "
                        id="email"
                        required
                        formControlName="email"
                        placeholder="Email"
                      />
                    </td>

                    <td class="text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap">
                        <input
                        type="tel"
                        class="
                          form-control
                          block
                          w-full
                          px-3
                          py-1.5
                          text-base
                          font-normal
                          text-gray-700
                          bg-white bg-clip-padding
                          border border-solid border-gray-300
                          rounded
                          transition
                          ease-in-out
                          m-0
                          focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none
                        "
                        id="phone"
                        required
                        formControlName = "phone"
                        placeholder="Phone Number"
                      />
                    </td>
                    <td class="text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap">
                        <div class="flex gap-3 items-center">
                            <div class="form-check form-check-inline">
                                <input class="form-check-input form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" type="radio" required
                                formControlName = "isSuperAdmin" id="isAdmin" [value]="true">
                                <label class="form-check-label inline-block text-gray-800" for="isAdmin">Yes</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" type="radio" formControlName = "isSuperAdmin" id="notAdmin" [value]="false">
                                <label class="form-check-label inline-block text-gray-800" for="notAdmin">No</label>
                              </div>
                        </div>

                    </td>
                    <td class="text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap">
                        <button type="button" class="inline-block px-6 py-2.5 bg-green-500 text-white font-medium text-xs leading-tight uppercase rounded-full shadow-md hover:bg-green-600 hover:shadow-lg focus:bg-green-600 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-green-700 active:shadow-lg transition duration-150 ease-in-out" (click)="SubmitData()">Submit</button>

                    </td>
                </tr>
              </ng-container>


            </tbody>
          </table>
        </div>
      </div>
    </div>
</div>
<ng-container *ngIf="modalIsOpen">
    <div class="top-0 left-0 overlay absolute w-screen h-screen bg-[rgba(0,0,0,0.3)] overflow-hidden">
        <div class="modal md: w-1/3 h-1/2 absolute left-1/2 translate-y-1/2 -translate-x-1/2">
            <div class="block p-6 rounded-lg shadow-lg bg-white max-w-md">
                <form [formGroup]="userUpdateForm">
                    <legend class="font-medium py-5 text-2xl">User Editing Form</legend>
                  <div class="grid grid-cols-2 gap-4">
                    <div class="form-group mb-6">
                      <input type="text" class="form-control
                        block
                        w-full
                        px-3
                        py-1.5
                        text-base
                        font-normal
                        text-gray-700
                        bg-white bg-clip-padding
                        border border-solid border-gray-300
                        rounded
                        transition
                        ease-in-out
                        m-0
                        focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none" id="exampleInput123"
                        aria-describedby="emailHelp123" placeholder="First name" formControlName="first_name">
                    </div>
                    <div class="form-group mb-6">
                      <input type="text" class="form-control
                        block
                        w-full
                        px-3
                        py-1.5
                        text-base
                        font-normal
                        text-gray-700
                        bg-white bg-clip-padding
                        border border-solid border-gray-300
                        rounded
                        transition
                        ease-in-out
                        m-0
                        focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none" id="exampleInput124"
                        aria-describedby="emailHelp124" placeholder="Last name" formControlName="last_name">
                    </div>
                  </div>
                  <div class="form-group mb-6">
                    <input type="email" class="form-control block
                      w-full
                      px-3
                      py-1.5
                      text-base
                      font-normal
                      text-gray-700
                      bg-white bg-clip-padding
                      border border-solid border-gray-300
                      rounded
                      transition
                      ease-in-out
                      m-0
                      focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none" id="exampleInput125"
                      placeholder="Email address" formControlName="email">
                  </div>
                  <div class="form-group mb-6">
                    <input type="tel" class="form-control block
                      w-full
                      px-3
                      py-1.5
                      text-base
                      font-normal
                      text-gray-700
                      bg-white bg-clip-padding
                      border border-solid border-gray-300
                      rounded
                      transition
                      ease-in-out
                      m-0
                      focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none" id="exampleInput126"
                      placeholder="Telephone Number" formControlName="phone">
                  </div>
                  <div class="flex justify-start py-4 gap-5">
                    <div class="form-check form-check-inline">
                      <input class="form-check-input form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" type="radio" formControlName="isSuperAdmin" id="inlineRadio10" [value]="true" [checked]="userUpdateForm.get('isSuperAdmin')?.value">
                      <label class="form-check-label inline-block text-gray-800" for="inlineRadio10">Admin</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input class="form-check-input form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" type="radio" formControlName="isSuperAdmin" id="inlineRadio20" [value]="false" [checked]="!userUpdateForm.get('isSuperAdmin')?.value">
                      <label class="form-check-label inline-block text-gray-800" for="inlineRadio20">Not Admin</label>
                    </div>
                  </div>

                  <div class="cta flex justify-between ">
                    <button type="submit" class="
                    
                    px-6
                    py-2.5
                    bg-red-600
                    text-white
                    font-medium
                    text-xs
                    leading-tight
                    uppercase
                    rounded
                    shadow-md
                    hover:bg-red-700 hover:shadow-lg
                    focus:bg-red-700 focus:shadow-lg focus:outline-none focus:ring-0
                    active:bg-red-800 active:shadow-lg
                    transition
                    duration-150
                    ease-in-out" (click)="toggleModal()">Cancel</button>
                    <button type="submit" class="
                    px-6
                    py-2.5
                    bg-green-600
                    text-white
                    font-medium
                    text-xs
                    leading-tight
                    uppercase
                    rounded
                    shadow-md
                    hover:bg-green-700 hover:shadow-lg
                    focus:bg-green-700 focus:shadow-lg focus:outline-none focus:ring-0
                    active:bg-green-800 active:shadow-lg
                    transition
                    duration-150
                    ease-in-out" (click)="updateUserData()">Update</button>
                  </div>
                </form>
              </div>
        </div>

    </div>
  </ng-container>
